<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dragon.dao.MusicUserDAO">
    <resultMap id="baseMap" type="SeleniumCloudMusicUser">

    </resultMap>
    <insert id="batchAdd" parameterType="java.util.List">
        INSERT INTO dragon_music_user(
        music_id,
        music_nick_name,
        user_url,create_time)VALUES
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.musicId},#{item.musicNickName},#{item.userUrl},#{item.createTime})
        </foreach>
    </insert>

    <select id="queryMusicUser" parameterType="com.dragon.model">
        <include refid="baseSQL"/>
    </select>

    <sql id="baseSQL">
        SELECT u.id,u.music_id,
          u.music_nick_name,
          u.music_nick_name,
          u.user_url,
          u.create_time,
          s.id as songKey,
          s.song_id,
          s.song_name
        FROM dragon_music_user AS u LEFT JOIN dragon_music_songs s ON u.id=s.song_id
    </sql>
</mapper>